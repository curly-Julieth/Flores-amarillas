<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feliz 21 de septiembre‚ô°</title>
    <style>
        :root {
            --bg:#94182f;
            --card: rgba(188, 63, 126, 0.06);
            --accent: #e9eb74;
            --soft: rgba(19, 109, 82, 0.12);
            --glass: rgba(184, 91, 91, 0.04);
        }
        html body {
            height: 100%;
            margin: 0;
            font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
            background:
                radial-gradient(1200px 600px at 10% 10%, rgba(255,230,150,0.03), transparent 10%),
                radial-gradient(900px 500px at 90% 90%, rgba(255,213,74,0.02), transparent 10%),
                var(--bg);
            color: #fff;
            overflow:hidden;
            -webkit-font-smoothing:antialiased;
            -moz-osx-font-smoothing:grayscale;
        }

        .stage {
            position:relative;
            width:100%;
            height:100%;
            display:flex;
            align-items:center;
            justify-content:center;
            padding:2rem;
            box-sizing:border-box;
        }

        .card {
            position:relative;
            width:min(980px, 92%);
            max-width:980px;
            padding:2.5rem;
            border-radius:18px;
            background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
            box-shadow: 0 10px 30px rgba(33, 1, 21, 0.6), inset 0 1px 0 rgba(255,255,255,0.02);
            backdrop-filter: blur(6px) saturate(110%);
            overflow:hidden;
        }

        h1{
            margin:0 0 0.25rem 0;
            font-size: clamp(1.6rem, 3.5vw, 2.4rem);
            letter-spacing: -0.5px;
            color: #fffbe6;
            text-shadow: 0 6px 18px rgba(0,0,0,0.6);
        }

        p.lead{
            margin:0 0 1.25rem 0;
            color: #fff7d9;
            opacity:0.95;
            font-size:1.05rem;
        }

        .controls{
            display:flex;
            gap:0.75rem;
            align-items:center;
            margin-top:1rem;
        }

        .play-btn{
            background: linear-gradient(180deg,var(--accent), #FFC107);
            border:0;
            padding:0.65rem 1rem;
            border-radius:12px;
            font-weight:700;
            cursor:pointer;
            box-shadow: 0 8px 18px rgba(255,193,7,0.12);
            transform-origin:center;
        }

        .play-btn:active{ transform: translateY(1px) scale(0.997); }
        .note{
            color: #fff3c4;
            opacity:0.9;
            font-size:0.9rem;
        }

        .garden{
            position:fixed;
            inset:0;
            pointer-events:none; /* no interfiere con clicks */
            overflow:hidden;
            z-index:20;
        }

        .flower{
            position:absolute;
            width: var(--size);
            height: var(--size);
            transform-origin: center;
            will-change: transform, top, left, opacity;
            filter: drop-shadow(0 6px 10px rgba(0,0,0,0.45));
            opacity:0.95;
        }

        .hearts {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none; /* no bloquea clics */
            overflow: hidden;
            z-index: 1;
        }

        .heart {
            position: absolute;
            font-size: 24px;
            animation: fall linear forwards;
            opacity: 0.9;
        }

        @keyframes fall {
            0% {
                transform: translateY(-10%) scale(1);
                opacity: 1;
            }
            100% {
                transform: translateY(110vh) scale(0.8);
                opacity: 0;
            }
        }

        .message{
            position:relative;
            z-index:10;
            max-width:60ch;
        }
        .message .big{
            display:inline-block;
            margin-top:1rem;
            font-size:clamp(1.15rem,2.4vw,1.35rem);
            line-height:1.5;
            color:#fffef6;
            text-shadow: 0 8px 30px rgba(0,0,0,0.55);
        }

        .signature{
            margin-top:1.25rem;
            font-style:italic;
            color:#fff8d9;
            opacity:0.95;
        }

        .spark{
            position:absolute;
            width:6px;height:6px;border-radius:50%;
            background:rgba(255,245,200,0.7);
            filter: blur(0.6px);
            z-index:4;
            opacity:0.9;
        }

        @media (max-width:520px){
            .card{ padding:1.25rem; border-radius:14px; }
            .signature{ font-size:0.95rem; }
        }

        .fixed-flower {
            position: absolute;
            right: 10%;    
            bottom: 25%;  
            z-index: 7;
        }

        .fixed-flower img {
            width: 250px;   
            height: auto;
            filter: drop-shadow(0 4px 10px rgba(0,0,0,0.5));
        }



    </style>
</head>
<body>
    <div class="stage" aria-live="polite">
        <div class="card" role="region" aria-label="Tarjeta de flores amarillas">
            <div class="message" id="message">
                <h1> Un ramo de flores bonitas para la ni√±a m√°s bonita‚ô°</h1>
                <p class="lead big">
                    Hoy te env√≠o este ramo de flores amarillas, aunque no sean reales (un d√≠a lo ser√°n), son un s√≠mbolo de alegr√≠a por poder compartir contigo.
                    Gracias por tu amor, tu amistad y tu compa√±√≠a. Eres una persona incre√≠ble y me siento afortunada de tenerte en mi vida.
                    Que este d√≠a est√© lleno de sonrisas, abrazos y momentos especiales ‚ô°.¬°Feliz 21 de septiembre, mi ni√±a bonita! Te quiero muchoüíó.
                </p>
                <div class="signature">- Con cari√±o, quien te piensa</div>

                <div class="controls" style="margin-top:1.35rem;">
                    <button class="play-btn" id="playBtn" aria-live="polite" title="Reproducir canci√≥n">
                        ‚ñ∂ Reproducir canci√≥n
                    </button>
                    <div class="note">Si el navegador bloquea la reproducci√≥n autom√°tica, pulsa el bot√≥n.</div>
                </div>
            </div>
            <div class="hearts" id="hearts"></div>
            <div id="sparks" aria-hidden="true"></div>
            <div class="fixed-flower" id="fixedFlower">
            <img src="flores amarillas imagen.png" alt="ramo de flores amarillas">
            </div>

        </div>
    </div>
    <audio id="audio" src="ChristianBasso&HaienQiu-Flowers.mp3" preload="auto" loop crossorigin="anonymous"></audio>

    <script>
        const garden = document.getElementById('garden');
        const sparks = document.getElementById('sparks');
        
        function createFlowerSVG(size = 60) {
            const svgNS= "http://www.w3.org/2000/svg";
            const svg = document.createElementNS(svgNS, "svg");
            svg.setAttribute("viewBox","0 0 100 100");
            svg.setAttribute("width", size);
            svg.setAttribute("height", size);
            svg.setAttribute("aria-hidden", "true");

            for(let i=0;i<5;i++){
                const petal= document.createElementNS(svgNS,"ellipse");
                petal.setAttribute("cx","50");
                petal.setAttribute("cy","28");
                petal.setAttribute("rx","14");
                petal.setAttribute("ry","24");
                petal.setAttribute("fill","#FFD54A");
                petal.setAttribute("transform",`rotate(${i*72} 50 50) translate(0 -22)`);
                svg.appendChild(petal);

        }
        const center = document.createElementNS(svgNS, "circle");
        center.setAttribute("cx","50");
        center.setAttribute("cy","52");
        center.setAttribute("r","14");
        center.setAttribute("fill","#F9A825");
        center.setAttribute("stroke","#B57F17");
        center.setAttribute("stroke-width","1");
        svg.appendChild(center);

        return svg;
    }
    
    function createHeart() {
    const heart = document.createElement("div");
    heart.classList.add("heart");
    heart.textContent = "‚ô°"; 
    heart.style.left = Math.random() * 100 + "vw";
    heart.style.animationDuration = 3 + Math.random() * 5 + "s"; 
    document.getElementById("hearts").appendChild(heart);

    setTimeout(() => {
        heart.remove();
    }, 8000);
}

setInterval(createHeart, 900); 




    function spawnFlower(options={}) {
        const el = document.createElement('div');
        const size = options.size ?? (24 + Math.random()*68);
        el.className = 'flower';
        el.style.setProperty('--size', `${size}px`);
        
        const left = Math.random() * 110 - 5;
        el.style.left = left + 'vw';
        el.style.top = (-20 - Math.random()*40) + 'vh';


        const fallDuration = (8 + Math.random()*14).toFixed(2);
        const delay = (Math.random()*-12).toFixed(2);
        el.style.animation = `fall ${fallDuration}s linear ${delay}s forwards`;

        el.animate([
            { transform: `translateX(0) rotate(${(-20+Math.random()*40).toFixed(1)}deg)` },
            { transform: `translateX(${(-30+Math.random()*60).toFixed(1)}px) rotate(${(-30+Math.random()*60).toFixed(1)}deg)` },
            { transform: `translateX(0) rotate(${(-20+Math.random()*40).toFixed(1)}deg)` }
        ], {
            duration: 2000 + Math.random()*4000,
            iterations: Infinity,
            direction: 'alternate',
            easing: 'ease-in-out'
        });

        const svg = createFlowerSVG(size);
        el.appendChild(svg);

        el.style.opacity = '0';
        el.style.transition = 'opacity 0.6s ease';

        garden.appendChild(el);

        requestAnimationFrame(() => {
            el.style.opacity = '1';
        });

        setTimeout(() => {
            if (el && el.parentElement) el.parentElement.removeChild(el);
        }, (parseFloat(fallDuration)+Math.abs(parseFloat(delay)) + 2) * 1000);

    }

    function startGarden(rate=900) {
        for(let i=0;i<12;i++){
            setTimeout(()=> spawnFlower(), i*120);
        }
        return setInterval(()=> spawnFlower(), rate);
    }

    let gardenInterval = startGarden(850);

    function spawnSpark(){
        const s = document.createElement('div');
        s.className='spark';
        const left = Math.random()*100;
        const top = Math.random()*100;
        s.style.left = left + 'vw';
        s.style.top = top + 'vh';
        s.style.opacity = (0.5 + Math.random()*0.7).toFixed(2);
        s.style.transform = `scale(${0.6 + Math.random()*1.6})`;
        sparks.appendChild(s);
        setTimeout(()=> s.style.opacity = 0, 60 + Math.random()*1200);
        setTimeout(()=> { if (s && s.parentElement) s.parentElement.removeChild(s); }, 1500 + Math.random()*1600);
    }
    setInterval(spawnSpark, 500 + Math.random()*1200);

    const audio = document.getElementById('audio');
    const playBtn = document.getElementById('playBtn');

    async function tryAutoPlay() {
        try {
            await audio.play();
            playBtn.textContent = '‚ñ∂ Reproduciendo...';
            playBtn.disabled = true;
        } catch (err) {
            playBtn.textContent = '‚ñ∂ Reproduciendo...';
            playBtn.disabled = false;
        }
    }

    playBtn.addEventListener( 'click', async () => {
        try {
            await audio.play();
            playBtn.textContent = '‚ñ∂ Reproduciendo...';
            playBtn.disabled = true;
        } catch (e) {
            console.warn('No se pudo reproducir autom√°ticamente:', e);
        try{
            const ctx = new (window.AudioContext || window.webkitAudioContext)();
            const o = ctx.createOscillator();
            const g = ctx.createGain();
            o.type = 'sine';
            o.frequency.value = 440;
            g.gain.value = 0.0001;
            o.connect(g); g.connect(ctx.destination);
            o.start();
            g.gain.exponentialRampToValueAtTime(0.05, ctx.currentTime + 0.02);
            g.gain.exponentialRampToValueAtTime(0.00001, ctx.currentTime + 0.35);
            setTimeout(()=>{ o.stop(); ctx.close(); }, 500);
            await audio.play();
            playBtn.textContent = '‚ñ∂ Reproduciendo...';
            playBtn.disabled = true;
            } catch(e2){ 
                console.error('Fallback audio tambi√©n fall√≥:', e2);
                alert('Tu navegador est√° bloqueando la reproducci√≥n autom√°tica. Pulsa "permitir sonido" o toca cualquier parte de la p√°gina para escuchar la canci√≥n.');
            }
        }
    });

    window.addEventListener('load', ()=>{
        tryAutoPlay();
    });

    window.addEventListener('pointerdown', async function once(){
        if (audio.paused) {
           try { await audio.play(); playBtn.textContent = '‚ñ∂ Reproduciendo...'; playBtn.disabled = true; } catch(err){ /* ignore */ }
        }
        window.removeEventListener('pointerdown', once);
    });

    window.addEventListener('keydown', e=>{
        if(e.key.toLowerCase() === 'p'){
            if(audio.paused) { audio.play(); playBtn.textContent = '‚ñ∂ Reproduciendo...'; playBtn.disabled = true; }
            else { audio.pause(); playBtn.textContent = '‚ñ∂ Reproducir canci√≥n'; playBtn.disabled = false; }
        }
    });
    </script>
</body>
</html>